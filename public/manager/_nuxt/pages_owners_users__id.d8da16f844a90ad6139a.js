webpackJsonp([8],{"1MzG":function(t,e,a){"use strict";var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-layout",{staticClass:"owner-user-form pt-0",attrs:{column:""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{staticClass:"btn-back",attrs:{xs12:"","pt-0":""}},[e("v-tooltip",{attrs:{right:""}},[e("v-btn",{staticClass:"mx-0",attrs:{slot:"activator",fab:"",flat:"",small:"",to:"/owners/users","active-class":""},slot:"activator"},[e("v-icon",[this._v("reply")])],1),e("span",[this._v(this._s(this.$t("Back")))])],1)],1)],1),e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{staticClass:"mb-3",attrs:{xs12:""}},[e("UserFormData")],1),e("v-flex",{attrs:{xs12:""}},[e("UserFormTerms")],1)],1)],1)},staticRenderFns:[]};e.a=s},"21M4":function(t,e,a){"use strict";var s=a("UbEG"),r=a("xz3x");var n=function(t){a("il0o")},i=a("VU/8")(s.a,r.a,!1,n,null,null);e.a=i.exports},FTYE:function(t,e,a){"use strict";var s=a("Dd8w"),r=a.n(s),n=a("NYxO"),i=a("wxRE"),o=a("21M4");e.a={data:function(){var t=this;return{showDeleteDialog:!1,record:{},formDataEdit:!1,rules:{email:[function(e){return!!e||t.$t("required")},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||t.$t("E-mail not valid")}],name:[function(e){return!!e||t.$t("required")}],surname:[function(e){return!!e||t.$t("required")}]}}},methods:r()({},Object(n.mapActions)("owners/users",["saveLastSubsriptionUserData"]),{onSave:function(){var t=this,e=this.getLastSubscription,a=e.id,s=e.name,r=e.surname,n=e.telephone,i=e.email;return this.saveLastSubsriptionUserData({id:a,data:{name:s,surname:r,telephone:n,email:i}}).then(function(){t.formDataEdit=!1})},cancelUserDelete:function(){this.showDeleteDialog=!1}}),components:{RemoveUserDialog:i.a,SmallEditSaveButtonBar:o.a},computed:r()({},Object(n.mapGetters)("owners/users",["getLastSubscription"])),created:function(){this.record=this.getLastSubscription}}},FiYa:function(t,e,a){"use strict";var s=a("FTYE"),r=a("h9XF");var n=function(t){a("WeOH")},i=a("VU/8")(s.a,r.a,!1,n,null,null);e.a=i.exports},O6RO:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".small-edit-save-button-bar .btn--floating.btn--small{width:13px}.small-edit-save-button-bar .btn--floating.btn--small .icon{font-size:22px}",""])},OU2e:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("RrsX"),r=a("xHke"),n=a("VU/8")(s.a,r.a,!1,null,null,null);e.default=n.exports},OtzM:function(t,e,a){"use strict";var s=a("y9sX"),r=a("FiYa");e.a={name:"UserForm",components:{UserFormData:r.a,UserFormTerms:s.a}}},RrsX:function(t,e,a){"use strict";var s=a("sJ2R");e.a={components:{UserForm:s.a},fetch:function(t){var e=t.params,a=t.store,s=e.id;return a.dispatch("owners/users/loadRecordList",{id:s},{root:!0})}}},UbEG:function(t,e,a){"use strict";e.a={components:{},props:{hideDelete:{default:!1},editMode:Boolean,color:{default:"black"}},methods:{onEditClick:function(){this.$emit("edit")},onDeleteClick:function(){this.$emit("delete")},onSaveClick:function(){this.$emit("save")},onCancelClick:function(){this.$emit("cancel")}}}},WeOH:function(t,e,a){var s=a("bqh9");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("324c6fe0",s,!0,{sourceMap:!1})},X1WX:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticClass:"owner-user-form-terms",attrs:{column:""}},[a("v-flex",{staticClass:"blue-grey lighten-5 pa-3",attrs:{xs12:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"title pt-3",attrs:{xs12:"",sm6:""}},[t._v("\n                    "+t._s(t.$t("Terms"))+"\n                ")]),a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:"",sm6:""}},[a("SmallEditSaveButtonBar",{attrs:{"hide-delete":!0,"edit-mode":t.dataEdit},on:{edit:function(e){t.dataEdit=!0},save:t.onSave,cancel:function(e){t.dataEdit=!1}}})],1)],1),a("div",{staticClass:"mb-2"},[t._v(t._s(t.$t("Subscription detail")))]),t._l(t.recordList,function(e,s,r){return[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("table",{staticClass:"owner-user-form-terms-data-table mb-3"},[t._l(e,function(e,s,r){return[0==r?[a("tr",{staticClass:"owner-user-form-terms-data-table-privacy-name"},[a("td",{staticClass:"pl-3 pt-2",attrs:{colspan:"4"}},[t._v(t._s(e.privacy.name))])]),a("tr",[a("th",{attrs:{width:"1%"}},[t._v(t._s(t.$t("Date")))]),a("th",{attrs:{width:"1%"}},[t._v(t._s(t.$t("Time")))]),a("th",{attrs:{width:"50%"}},[t._v(t._s(t.$t("Treatments")))]),a("th",{attrs:{width:"30%"}},[t._v(t._s(t.$t("Privacy url"))+"/IP")])])]:t._e(),[a("tr",[a("td",[t._v(t._s(t._f("dmy")(e.created.date)))]),a("td",[t._v(t._s(t._f("time")(e.created.date)))]),a("td",[t._l(e.privacy.paragraphs,function(s){return[a("div",[a("div",[a("i",[t._v(t._s(s.title))])]),t._l(s.treatments,function(s,r){return[a("div",{staticClass:"ml-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.selected,expression:"t.selected"}],attrs:{type:"checkbox",disabled:!t.dataEdit},domProps:{checked:Array.isArray(s.selected)?t._i(s.selected,null)>-1:s.selected},on:{click:function(a){t.addChangedTerm(e)},change:function(e){var a=s.selected,r=e.target,n=!!r.checked;if(Array.isArray(a)){var i=t._i(a,null);r.checked?i<0&&t.$set(s,"selected",a.concat([null])):i>-1&&t.$set(s,"selected",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(s,"selected",n)}}}),t._v(" "+t._s(s.code)+"\n                                                        "),s.mandatory||s.restrictive?a("span",{staticClass:"ml-2"},[t._v("\n                                                            ("),s.mandatory?a("span",[t._v(t._s(t.$t("Mandatory"))+" ")]):t._e(),s.restrictive?a("span",[t._v(t._s(t.$t("Restrictive"))+" ")]):t._e(),t._v(")\n                                                        ")]):t._e()])]})],2)]})],2),a("td",[t._v("\n                                        "+t._s(e.page)),a("br"),t._v(t._s(e.ip)+"\n                                    ")])])]]})],2)])],1)]})],2)],1)},staticRenderFns:[]};e.a=s},YXsu:function(t,e,a){var s=a("Ywlt");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("c63e630a",s,!0,{sourceMap:!1})},Ywlt:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},Zv1u:function(t,e,a){var s=a("baLW");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("70b06f80",s,!0,{sourceMap:!1})},baLW:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".owner-user-form-terms-data-table{padding:0;background:#fff;width:100%;border:1px solid silver;border-spacing:0;border-collapse:collapse}.owner-user-form-terms-data-table td,.owner-user-form-terms-data-table th{padding:3px 3px 3px 5px;border-spacing:0;border:1px solid silver;text-align:left;vertical-align:baseline}.owner-user-form-terms-data-table .owner-user-form-terms-data-table-privacy-name{background:#6d4c41;color:#fff}",""])},bqh9:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".owner-user-form-layout .input-group--text-field input:disabled{opacity:.3}",""])},h9XF:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticClass:"owner-user-form-layout",attrs:{column:""}},[a("v-flex",{staticClass:"blue-grey lighten-5 pa-3",attrs:{xs12:""}},[a("RemoveUserDialog",{attrs:{email:t.record.email,show:t.showDeleteDialog},on:{cancel:t.cancelUserDelete}}),a("div",{staticClass:"title"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"pt-3",attrs:{xs6:""}},[t._v("\n                    "+t._s(t.$t("User data"))+"\n                ")]),a("v-flex",{staticClass:"text-xs-right",attrs:{xs6:""}},[a("SmallEditSaveButtonBar",{attrs:{"edit-mode":t.formDataEdit},on:{delete:function(e){t.showDeleteDialog=!0},save:t.onSave,cancel:function(e){t.formDataEdit=!1},edit:function(e){t.formDataEdit=!0}}})],1)],1)],1),a("v-form",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-spacer")],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{"hide-details":"",rules:t.rules.surname,required:"",disabled:!t.formDataEdit,box:"",label:t.$t("Surname")},model:{value:t.record.surname,callback:function(e){t.$set(t.record,"surname",e)},expression:"record.surname"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{"hide-details":"",rules:t.rules.name,required:"",disabled:!t.formDataEdit,box:"",label:t.$t("Name")},model:{value:t.record.name,callback:function(e){t.$set(t.record,"name",e)},expression:"record.name"}})],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{"hide-details":"",rules:t.rules.email,required:"",disabled:!0,box:"",label:t.$t("Email")},model:{value:t.record.email,callback:function(e){t.$set(t.record,"email",e)},expression:"record.email"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{"hide-details":"",disabled:!t.formDataEdit,box:"",label:t.$t("Telephone")},model:{value:t.record.telephone,callback:function(e){t.$set(t.record,"telephone",e)},expression:"record.telephone"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};e.a=s},il0o:function(t,e,a){var s=a("O6RO");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("34319f2c",s,!0,{sourceMap:!1})},ipnL:function(t,e,a){"use strict";var s=a("Dd8w"),r=a.n(s),n=a("NYxO"),i=a("21M4");e.a={name:"UserForm",methods:r()({onSave:function(){var t=this;this.$nuxt.$loading.start(),this.saveAllTerms(this.modified).then(function(){t.$nuxt.$loading.finish(),t.dataEdit=!1}).catch(function(){return t.$nuxt.$loading.finish()})},allFlags:function(t){for(var e=[],a=0;a<t.paragraphs.length;a++)for(var s=t.paragraphs[a],r=0;r<s.treatments.length;r++){var n=s.treatments[r],i=n.code,o=n.selected,l=n.mandatory;e.push({code:i,selected:o,mandatory:l})}return e},addChangedTerm:function(t){var e=this,a=this.modified.findIndex(function(e){return t.id===e.id});this.$nextTick(function(){var s={id:t.id,privacy:t.privacy,privacyFlags:e.allFlags(t.privacy)};a<0?e.modified.push(s):e.modified[a]=s})}},Object(n.mapActions)("owners/users",["saveAllTerms"])),data:function(){return{dataEdit:!1,modified:[]}},components:{SmallEditSaveButtonBar:i.a},computed:r()({},Object(n.mapState)("owners/users",["recordList"]))}},mXxJ:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"450"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-toolbar",{attrs:{dense:"",color:"blue",dark:""}},[a("v-toolbar-title",{staticClass:"subheading"},[t._v("\n            "+t._s(t.$t("Remove user"))+" "+t._s(t.email)+"\n        ")])],1),a("v-card",{staticClass:"pa-3"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-form",{ref:"exportform",attrs:{enctype:"text/plain",target:"_blank",method:"POST"}},[a("v-text-field",{attrs:{label:t.$t("Security check - Input user email"),box:""},model:{value:t.checkEmail,callback:function(e){t.checkEmail=e},expression:"checkEmail"}}),a("v-alert",{attrs:{type:"error",value:!0}},[t._v("\n                        "+t._s(t.$t("You will delete all the subscriptions"))+"\n                    ")])],1)],1)],1),a("v-card-actions",[a("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]}),a("v-spacer"),a("v-btn",{staticClass:"elevation-1",nativeOn:{click:function(e){return t.onCancel(e)}}},[t._v(t._s(t.$t("Cancel")))]),a("v-btn",{staticClass:"elevation-1",attrs:{disabled:!t.canCancel},nativeOn:{click:function(e){return t.onExport(e)}}},[a("v-icon",[t._v("delete")]),a("span",{staticClass:"ml-2"},[t._v(t._s(t.$t("Remove user")))])],1)],1)],1)],1)},staticRenderFns:[]};e.a=s},sJ2R:function(t,e,a){"use strict";var s=a("OtzM"),r=a("1MzG");var n=function(t){a("YXsu")},i=a("VU/8")(s.a,r.a,!1,n,null,null);e.a=i.exports},wxRE:function(t,e,a){"use strict";var s=a("yNn2"),r=a("mXxJ"),n=a("VU/8")(s.a,r.a,!1,null,null,null);e.a=n.exports},xHke:function(t,e,a){"use strict";var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",{staticClass:"pa-2",attrs:{fluid:"","grid-list-sm":""}},[e("UserForm")],1)},staticRenderFns:[]};e.a=s},xz3x:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",{staticClass:"small-edit-save-button-bar pa-0 ma-0"},[t.editMode?t._e():[t.hideDelete?t._e():a("v-tooltip",{attrs:{top:"","close-delay":"0","open-delay":"0"}},[a("v-btn",{attrs:{slot:"activator",fab:"",small:"",flat:"",color:t.color},on:{click:t.onDeleteClick},slot:"activator"},[a("v-icon",[t._v("delete")])],1),a("span",[t._v(t._s(t.$t("Delete")))])],1),a("v-tooltip",{attrs:{top:"","close-delay":"0","open-delay":"0"}},[a("v-btn",{attrs:{slot:"activator",fab:"",small:"",flat:"",color:t.color},on:{click:t.onEditClick},slot:"activator"},[a("v-icon",[t._v("edit")])],1),a("span",[t._v(t._s(t.$t("Edit")))])],1)],t.editMode?[a("v-tooltip",{attrs:{top:"","close-delay":"0","open-delay":"0"}},[a("v-btn",{attrs:{slot:"activator",fab:"",small:"","flat:":"",color:"color"},on:{click:t.onCancelClick},slot:"activator"},[a("v-icon",[t._v("exit_to_app")])],1),a("span",[t._v(t._s(t.$t("Cancel")))])],1),a("v-tooltip",{attrs:{top:"","close-delay":"0","open-delay":"0"}},[a("v-btn",{attrs:{slot:"activator",fab:"",small:"",flat:"",color:t.color},on:{click:t.onSaveClick},slot:"activator"},[a("v-icon",[t._v("save")])],1),a("span",[t._v(t._s(t.$t("Save")))])],1)]:t._e()],2)},staticRenderFns:[]};e.a=s},y9sX:function(t,e,a){"use strict";var s=a("ipnL"),r=a("X1WX");var n=function(t){a("Zv1u")},i=a("VU/8")(s.a,r.a,!1,n,null,null);e.a=i.exports},yNn2:function(t,e,a){"use strict";e.a={name:"RemoveUserDialog",methods:{onCancel:function(){this.$emit("cancel")}},computed:{canCancel:function(){return this.email===this.checkEmail}},data:function(){return{checkEmail:""}},props:{show:{default:!1},email:{type:String}}}}});