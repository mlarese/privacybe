webpackJsonp([6],{"07sv":function(t,e,a){var r=a("rpnb"),s=a("CxPB"),n=a("t8rQ");t.exports=function(t,e){return null==t?t:r(t,s(e),n)}},"0X/x":function(t,e,a){"use strict";var r=a("Dd8w"),s=a.n(r),n=a("NYxO"),i=a("YtWf"),o=a("Eoz/"),l=a.n(o),c=a("YVPM"),u=a.n(c),d=new Date,p=u()(d,1),f=["",l()(d,"YYYY-MM-DD"),l()(p,"YYYY-MM-DD")];e.a={name:"UserFilter",data:function(){return{dateFilterToggle:0}},created:function(){this.dateFilterToggle=0},methods:s()({setDateFilter:function(){var t=this;this.$nextTick(function(){t.dateFilter=f[t.dateFilterToggle]})}},Object(n.mapActions)("owners/users",["searchList"]),{onReload:function(){this.searchList()}}),computed:s()({criteria:Object(i.c)("owners/users/search@criteria"),dateFilter:Object(i.c)("owners/users/search@localDateCriteria")},Object(n.mapState)("owners/users",["list"]))}},"34KG":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".surfers-list-table td,.surfers-list-table tr{cursor:pointer}.surfers-list-table td .btn{height:26px!important;width:26px}.surfers-list-table table.table tbody td,.surfers-list-table table.table tbody th,.surfers-list-table table.table thead tr{height:32px;font-size:12px}",""])},"4MR0":function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("ShareListDialog",{attrs:{show:t.showShareDialog},on:{cancel:t.hideShareDialog}}),a("v-layout",{attrs:{row:"",wrap:""}},[a("div",{staticClass:"headline"},[t._v(t._s(t.$t("Users")))]),a("v-spacer"),a("v-btn",{staticClass:"elevation-0",staticStyle:{"text-transform":"uppercase"},attrs:{dark:"",color:"indigo lighten-1"},on:{click:t.onShowShareList}},[t._v("\n            "+t._s(t.$t("Csv Export"))+"\n        ")])],1),a("v-layout",{staticClass:"mb-3"},[a("UserFilter")],1),a("div",{staticClass:"title mb-2"},[t._v(t._s(t.$t("Filter users according to accepted regulations")))]),a("v-layout",{staticClass:"mb-4"},[a("TreatmentsFilter")],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("UsersGrid")],1)],1)],1)},staticRenderFns:[]};e.a=r},"68m6":function(t,e,a){var r=a("NX4n");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("1d7b2245",r,!0,{sourceMap:!1})},"86Ep":function(t,e,a){"use strict";var r=a("Dd8w"),s=a.n(r),n=a("NYxO"),i=a("kvU2"),o=a.n(i),l=a("07sv"),c=a.n(l);e.a={name:"TreatmentsFilter",data:function(){return{mandatoryTermFilter:[],filter:{person:"",treatments:{}}}},methods:s()({onTermChange:function(t,e){if(t.selected)e.selected=!0;else{var a=this.selectedTermsCount(e);e.selected=a>0}this.onChange(e)},onTreatmentChange:function(t){t.selected?this.setSelectAllTerms(t.terms,!0):this.setSelectAllTerms(t.terms,!1),this.onChange(t)}},Object(n.mapMutations)("owners/users",["setExportFilter"]),{setSelectAllTerms:function(t,e){c()(t,function(t){t.selected=e})},onChange:function(t){this.filter.treatments[t.code]=t,this.setExportFilter(this.filter)},selectedTermsCount:function(t){return t.terms.reduce(function(t,e){return e.selected&&t++,e.selected?t++:t},0)}}),created:function(){this.mandatoryTermFilter=o()(this.termFilter),this.filter.treatments=this.mandatoryTermFilter,this.setExportFilter(this.filter)},computed:s()({},Object(n.mapState)("terms",["termFilter"]))}},"8Qov":function(t,e,a){"use strict";var r=a("phVV"),s=a("nhZJ"),n=a("VU/8")(r.a,s.a,!1,null,null,null);e.a=n.exports},BEFF:function(t,e,a){"use strict";var r=a("//Fk"),s=a.n(r),n=a("NUKO");e.a={components:{UserManager:n.a},fetch:function(t){var e=t.store,a=[e.dispatch("terms/loadFilter",{},{root:!0}),e.dispatch("treatments/load",{},{root:!0})];return s.a.all(a).then(function(){e.state.owners.users.useCache||e.dispatch("owners/users/searchList",{},{root:!0}).then(function(){return e.commit("owners/users/setUseCache",!0,{root:!0})})})}}},CxPB:function(t,e,a){var r=a("wSKX");t.exports=function(t){return"function"==typeof t?t:r}},HbJv:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},IAM6:function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",t._b({staticClass:"elevation-1 surfers-list-table",attrs:{headers:t.headers,items:t.formFilterValidList,pagination:t.grid.pagination,search:t.search.criteria,loading:t.isAjax,"sort-icon":"keyboard_arrow_down","no-data-text":t.$t("No user found")},on:{"update:pagination":function(e){t.$set(t.grid,"pagination",e)}},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[a("v-icon",{staticClass:"mr-2 pa-0"},[t._v("cloud_done")]),a("span",{staticStyle:{position:"relative",top:"2px"}},[t._v(t._s(t._f("dmy")(e.item.created)))])],1),a("td",[t._v("\n                "+t._s(e.item.email)+"\n            ")]),a("td",[t._v(" "+t._s(e.item.surname)+" ")]),a("td",[t._v(t._s(e.item.name))]),a("td",{staticClass:"justify-center layout px-0"},[a("nuxt-link",{attrs:{to:"/owners/users/"+t.encodedId(e.item.email)+"?mode=edit"}},[a("v-tooltip",{attrs:{left:""}},[a("v-btn",{staticClass:"pa-0 ma-0",attrs:{slot:"activator",flat:"",small:"",icon:"",color:"blue"},slot:"activator"},[a("v-icon",[t._v("edit")])],1),a("span",[t._v(t._s(t.$t("Edit user")))])],1)],1),t._e(),t._e()],1)])]}},{key:"expand",fn:function(e){var r=e.item;return[a("v-card",{attrs:{flat:""}},[a("v-card-text",{},[t._v("Ip: "+t._s(r.ip))]),t._l(r.privacyFlags,function(e,r){return a("v-card-text",{key:r,staticClass:"py-0 my-0"},[e.selected?a("v-icon",[t._v("check_box")]):a("v-icon",[t._v("check_box_outline_blank")]),t._v("\n                "+t._s(e.code)+"\n            ")],1)}),a("v-card-text")],2)]}},{key:"pageText",fn:function(e){var a=e.pageStart,r=e.pageStop;return[t._v("\n        "+t._s(t.$t("From"))+" "+t._s(a)+" "+t._s(t.$t("To"))+" "+t._s(r)+"\n    ")]}}])},"v-data-table",t.tableTexts,!1),[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)},staticRenderFns:[]};e.a=r},K40v:function(t,e,a){"use strict";var r=a("zyW9"),s=a("IAM6");var n=function(t){a("eSqC")},i=a("VU/8")(r.a,s.a,!1,n,null,null);e.a=i.exports},LBBD:function(t,e,a){"use strict";var r=a("0X/x"),s=a("x4+8");var n=function(t){a("OEWf")},i=a("VU/8")(r.a,s.a,!1,n,null,null);e.a=i.exports},"LBi/":function(t,e,a){"use strict";var r=a("lEY4"),s=a("nlVH"),n=a("VU/8")(r.a,s.a,!1,null,null,null);e.a=n.exports},NUKO:function(t,e,a){"use strict";var r=a("hJJ5"),s=a("4MR0"),n=a("VU/8")(r.a,s.a,!1,null,null,null);e.a=n.exports},NX4n:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".left-bordered{border-right:1px solid #e1e1e1}.treatment-flag-checkbox .input-group--selection-controls__ripple{height:24px;width:24px;left:9px}.treatment-flag-checkbox label{font-size:12px;line-height:20px;color:rgba(0,0,0,.8)!important}.treatment-flag-checkbox .icon{font-size:18px}.treatment-flag-checkbox .input-group--text-field-box .input-group__input,.treatment-flag-checkbox .input-group__input{min-height:20px}",""])},OEWf:function(t,e,a){var r=a("dAD4");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("6e2a4f82",r,!0,{sourceMap:!1})},RZlB:function(t,e,a){var r=a("HbJv");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("6b904a7d",r,!0,{sourceMap:!1})},TP8e:function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticClass:"treatment-filter blue-grey lighten-5",attrs:{row:"",wrap:""}},t._l(t.mandatoryTermFilter,function(e,r){return a("v-flex",{key:r,staticClass:"py-2 left-bordered",attrs:{xs12:"",sm4:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"pl-2",attrs:{xs12:""}},[a("span",{staticClass:"treatment-flag"},[a("v-checkbox",{staticClass:"treatment-flag-checkbox",attrs:{color:"blue darken-1","hide-details":"",small:"",label:e.name},on:{change:function(a){t.onTreatmentChange(e)}},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"treatment.selected"}})],1)])],1),a("v-layout",{staticClass:"pl-4",attrs:{row:"",wrap:""}},t._l(e.terms,function(r,s){return a("v-flex",{key:s,attrs:{xs12:""}},[a("v-checkbox",{staticClass:"treatment-flag-checkbox",attrs:{color:"blue darken-1","hide-details":"",small:"",label:r.name},on:{change:function(a){t.onTermChange(r,e)}},model:{value:r.selected,callback:function(e){t.$set(r,"selected",e)},expression:"term.selected"}})],1)}))],1)}))},staticRenderFns:[]};e.a=r},UgkA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,a){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=(0,n.default)(t,a),s=Number(e);return r.setDate(r.getDate()+s),r};var r,s=a("Sc7W"),n=(r=s)&&r.__esModule?r:{default:r};t.exports=e.default},YVPM:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,a){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Number(e);return(0,n.default)(t,-r,a)};var r,s=a("UgkA"),n=(r=s)&&r.__esModule?r:{default:r};t.exports=e.default},a0OY:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("BEFF"),s=a("wIit");var n=function(t){a("RZlB")},i=a("VU/8")(r.a,s.a,!1,n,null,null);e.default=i.exports},dAD4:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".user-filter-toggle{border:1px solid #e2e2e2}.user-filter-date-toggle.btn--active{background-color:#e1e1e1!important;pointer-events:none}",""])},eSqC:function(t,e,a){var r=a("34KG");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("193ea9b8",r,!0,{sourceMap:!1})},gTC0:function(t,e,a){"use strict";var r=a("86Ep"),s=a("TP8e");var n=function(t){a("68m6")},i=a("VU/8")(r.a,s.a,!1,n,null,null);e.a=i.exports},hJJ5:function(t,e,a){"use strict";var r=a("Dd8w"),s=a.n(r),n=a("gTC0"),i=a("LBBD"),o=a("K40v"),l=a("LBi/"),c=a("8Qov"),u=a("NYxO"),d=a("L8MQ"),p=a.n(d);e.a={name:"UserManager",methods:s()({},Object(u.mapActions)("owners/users",["searchList"]),{onShowShareList:function(){this.showShareDialog=!0},onSearch:function(){var t=this.exportFilter,e=t.person,a=t.treatments;a=p()(a).filter(function(t){return t.selected}),this.searchList({person:e,treatments:a})},hideShareDialog:function(){this.showShareDialog=!1}}),computed:s()({},Object(u.mapState)("owners/users",["exportFilter"])),data:function(){return{showShareDialog:!1,toggleTemporaryFilter:1}},components:{GridSearchBar:c.a,ShareListDialog:l.a,TreatmentsFilter:n.a,UserFilter:i.a,UsersGrid:o.a}}},lEY4:function(t,e,a){"use strict";var r=a("mvHQ"),s=a.n(r),n=a("Dd8w"),i=a.n(n),o=a("NYxO"),l=a("Eoz/"),c=a.n(l),u=a("lbHh"),d=a.n(u),p=a("jLWv"),f=a("/5sW"),m=a("L8MQ"),v=a.n(m);e.a={name:"ShareListDialog",computed:i()({},Object(o.mapState)("owners/users",["exportFilter"])),methods:i()({},Object(o.mapActions)("owners/users",["prepareExportList"]),{onCancel:function(){this.$emit("cancel")},onExport:function(){var t=this,e=this.$auth.getToken(Object(p.a)()),a=e.split("bearer ");if(a.length>0){e=a[1],d.a.set("token",e);var r=this.exportFilter,n=r.person,i=r.treatments;i=v()(i).filter(function(t){return t.selected});var o={adapter:this.adapter,contactlistname:this.contactlistName,contactlistemail:"",contactlistreplytoemail:"",filter:{person:n,treatments:i}};this.prepareExportList(o).then(function(e){t.jsonParams=s()(e.data),t.$refs.exportform.$el.action=e.url,f.default.nextTick(function(){t.$refs.exportform.$el.submit()})})}else alert(this.$t("Error"))}}),created:function(){var t=c()(new Date,"YYYYMMDDTHHmmss");this.contactlistName=this.adapter+"-"+t+".csv"},data:function(){return{adapter:"mailone",contactlistName:"",jsonParams:null}},props:{show:{default:!1}}}},nhZJ:function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-toolbar",{staticClass:"py-0 px-4  elevation-1",attrs:{dense:"",color:"white"}},[a("v-text-field",{attrs:{disabled:0==t.list.length,"append-icon":"search",label:t.$t("Filter result set"),"single-line":"","hide-details":""},model:{value:t.search.localCriteria,callback:function(e){t.$set(t.search,"localCriteria",e)},expression:"search.localCriteria"}})],1)},staticRenderFns:[]};e.a=r},nlVH:function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-toolbar",{attrs:{dense:"",color:"blue",dark:""}},[a("v-toolbar-title",{staticClass:"subheading"},[a("v-icon",[t._v("alternate_email")]),t._v("\n            "+t._s(t.$t("Share list"))+" - MailOne\n        ")],1)],1),a("v-card",{staticClass:"pa-3"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-form",{ref:"exportform",attrs:{enctype:"text/plain",target:"_blank",method:"POST"}},[a("v-text-field",{attrs:{"prepend-icon":"description",label:t.$t("List name"),box:""},model:{value:t.contactlistName,callback:function(e){t.contactlistName=e},expression:"contactlistName"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.jsonParams,expression:"jsonParams"}],attrs:{type:"hidden",name:"json"},domProps:{value:t.jsonParams},on:{input:function(e){e.target.composing||(t.jsonParams=e.target.value)}}})],1)],1)],1),a("v-card-actions",[a("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]}),a("v-spacer"),a("v-btn",{staticClass:"elevation-1",nativeOn:{click:function(e){return t.onCancel(e)}}},[t._v(t._s(t.$t("Cancel")))]),a("v-btn",{staticClass:"elevation-1",attrs:{disabled:!t.contactlistName},nativeOn:{click:function(e){return t.onExport(e)}}},[a("v-icon",[t._v("cloud_download")]),a("span",{staticClass:"ml-2"},[t._v(t._s(t.$t("Share")))])],1)],1)],1)],1)},staticRenderFns:[]};e.a=r},phVV:function(t,e,a){"use strict";var r=a("Dd8w"),s=a.n(r),n=a("NYxO");e.a={name:"GridSearchBar",computed:s()({},Object(n.mapState)("owners/users",["list","search","grid"]),Object(n.mapState)("api",["isAjax"]))}},wIit:function(t,e,a){"use strict";var r={render:function(){var t=this.$createElement;return(this._self._c||t)("UserManager")},staticRenderFns:[]};e.a=r},"x4+8":function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticClass:"user-filter",attrs:{row:"",wrap:"","align-baseline":""}},[a("v-flex",{attrs:{xs9:"",sm5:""}},[a("v-text-field",{attrs:{"append-icon":"search",box:"",color:"silver","hide-details":"",label:t.$t("Surname, Name, Email")},model:{value:t.criteria,callback:function(e){t.criteria=e},expression:"criteria"}})],1),a("v-flex",{attrs:{xs3:"",sm1:""}},[a("v-tooltip",{attrs:{top:""}},[a("v-btn",{attrs:{slot:"activator",flat:"",fab:"",small:""},on:{click:t.onReload},slot:"activator"},[a("v-icon",{attrs:{medium:""}},[t._v("replay")])],1),a("span",{domProps:{textContent:t._s(t.$t("List refresh"))}})],1)],1),a("v-flex",{attrs:{xs12:"",sm5:""}},[a("v-btn-toggle",{staticClass:"user-filter-toggle elevation-0 ",staticStyle:{position:"relative",top:"4px"},model:{value:t.dateFilterToggle,callback:function(e){t.dateFilterToggle=e},expression:"dateFilterToggle"}},[a("v-btn",{staticClass:"user-filter-date-toggle",attrs:{flat:"",disabled:0==t.dateFilterToggle},on:{click:t.setDateFilter}},[a("v-icon",{staticClass:"mr-1"},[t._v("all_inclusive")]),a("span",{domProps:{textContent:t._s(t.$t("All"))}})],1),a("v-btn",{staticClass:"user-filter-date-toggle",attrs:{flat:"",disabled:1==t.dateFilterToggle},on:{click:t.setDateFilter}},[a("v-icon",{staticClass:"mr-1"},[t._v("today")]),a("span",{domProps:{textContent:t._s(t.$t("Today"))}})],1),a("v-btn",{staticClass:"user-filter-date-toggle",attrs:{flat:"",disabled:2==t.dateFilterToggle},on:{click:t.setDateFilter}},[a("v-icon",{staticClass:"mr-1"},[t._v("calendar_today")]),a("span",{domProps:{textContent:t._s(t.$t("Yesterday"))}})],1)],1)],1)],1)},staticRenderFns:[]};e.a=r},zyW9:function(t,e,a){"use strict";var r=a("Dd8w"),s=a.n(r),n=a("NYxO");t="owners/users";e.a={name:"UsersGrid",methods:{encodedId:function(t){return encodeURI(btoa(t))}},data:function(){var e=[{text:this.$t("Last subscription"),value:"created"},{text:this.$t("Email"),value:"email"},{text:this.$t("Surname"),value:"surname"},{text:this.$t("Name"),value:"name"},{text:this.$t("Actions"),value:"action"}];return{formDateFilter:"2018-05-18",tableTexts:{rowsPerPageText:this.$t("Rows per page"),rowsPerPageItems:[10,20,50,{text:this.$t("All"),value:-1}]},module:t,headers:e}},computed:s()({},Object(n.mapGetters)(t,["filterListByDate"]),Object(n.mapState)(t,["list","search","grid"]),Object(n.mapState)("api",["isAjax"]),{formFilterValidList:function(){return this.validList},validList:function(){return this.filterListByDate.filter(function(t){return t.email&&t.email.includes("@")})}})}}});